-- ============================================================================
-- SCRIPT MASTER: Aplicar Todas as Correções RLS
-- ============================================================================
-- Descrição: Executa todos os scripts de correção RLS em ordem
-- Uso: Execute este arquivo para aplicar todas as correções de uma vez
-- ============================================================================

\echo '=========================================================================='
\echo 'ETAPA 1/3: Criando funções helper...'
\echo '=========================================================================='
\i 001_create_helper_functions.sql

\echo ''
\echo '=========================================================================='
\echo 'ETAPA 2/3: Removendo políticas antigas...'
\echo '=========================================================================='
\i 002_drop_old_policies.sql

\echo ''
\echo '=========================================================================='
\echo 'ETAPA 3/3: Criando políticas novas...'
\echo '=========================================================================='
\i 003_create_new_policies.sql

\echo ''
\echo '=========================================================================='
\echo 'CONCLUÍDO! RLS configurado sem recursão infinita'
\echo '=========================================================================='
